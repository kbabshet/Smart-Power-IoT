\documentclass[10pt,twocolumn]{witseiepaper}
\usepackage{KJN}
\usepackage{url}

\usepackage{float}
\usepackage{graphicx}
\usepackage{tikz}
\usepackage{pgfplots}
\usepackage{circuitikz}
\usepackage{multirow}
\usepackage{tabto}
\usepackage{pdfpages}
\usepackage[bottom]{footmisc}
\usetikzlibrary{shapes.geometric, arrows}


\ifpdf
\pdfinfo{
	/Title (INSTRUCTIONS AND STYLE GUIDELINES FOR THE PREPARATION OF FINAL YEAR LABORATORY PROJECT PAPERS : 2005 VERSION)
	/Author (Ken J Nixon)
	/CreationDate (D:200309251200)
	/ModDate (D:200510121530)
	/Subject (ELEN417/455 Paper Format, 2005)
	/Keywords (ELEN417, ELEN455, paper, instructions, style guidelines, laboratory project)
}
\fi


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{document}
	\includepdf{ProjCoverPage}
	
	\title{First Prototype Design and Execution of a Smart Home Power Management System\\ 2016/04/11}
	
	\author{Ari Croock - 718005\\Kanaka Babshet - 678851\\Alice Yang - 597609\\Daniel Weinberg - 547937\\\\ELEN4009 - Software Engineering}
	\thanks{School of Electrical \& Information Engineering, University of the
		Witwatersrand, Johannesburg}
	%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
	%
	\abstract{This paper details the design and implementation of the first prototype of a smart home power management system. The final project submission is composed of an application which can add a household device, and control its state, as well as a compilation of all the documentation written in the process of designing this application. Details of the experiences during the design, implementation, and testing, have been provided. All constraints and specifications are successfully met, and additional improvements can still be made in the future.}
	
	\keywords{Design, Smart Home, Power Management, Internet of Things}
	
	\maketitle
	\thispagestyle{empty}\pagestyle{empty}
	
	
	%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
	%
	\section{INTRODUCTION}
	
	A smart home power management system allows users to control and supervise various electrical devices within the household in order to manage the overall power consumption. The system also automatically manages various devices without human interaction depending on the settings enabled in advance by the system user.
	This interaction and status display is done via a webpage accessible to all predefined household users. 
	
	\subsection{Problem Statement}
	With the rapidly growing interest in new Internet of Things (IoT) technologies, networks consisting of these devices will become increasingly difficult to manage and control. Additionally, power consumption and monitoring will become a greater concern, especially in emerging markets such as South Africa.\\
	Given this knowledge, surveys were conducted in order to define the specifications and the requirements of the Smart Home Power Management System. 
	
	The survey is structured in such a way that it enables users to provide useful information required by the software engineers. The information provided allows the software engineers to define the problem, sketch outlines for the best solution, and determine the constraints as well as resources needed for the system design.
	
	In obtaining information from the potential users, the software engineers are able to get a precise overview of the requirements that the users are expecting from the system, as well as an insight of the system from the user's perspective. 
	\newpage
	The figures in Appendix A illustrate the results obtained from the survey.
	
	\subsection{Project Objectives}
	
	The aim of this project is to design the complete aforementioned system and implement some aspect of the system which is defined as the first prototype. The prototype implemented is made up of a scrollable webpage, with a page header, the addition and removal of a device, with corresponding specifications, viewing the devices connected, and toggling between the states of devices. 
	
	\subsection{Stakeholders}
	
	Stakeholders are defined as the people, groups, or organisations that have interest, concern, or influence in an organisational project \cite{stakeholders}. Figure~\ref{fig:stakeholders} below illustrates the project stakeholders that will directly interact with the system as well as those external to it. 
	
	\begin{figure}[H]
		\centering
		\includegraphics[width=0.75\linewidth]{stakeholders}
		\caption{Project stakeholder onion diagram}
		\label{fig:stakeholders}
	\end{figure}

	\subsection{Report Breakdown}
	Section 2 details the software requirement specification, and is followed by section 3 which contains an extensive design document split into the relevant front- and back-end sections. Section 4 details the initial prototype implementation. Section 5 introduces the sprint planning and illustrates the work breakdown over the time designated for this project, while section 6 provides the sprint retrospective corresponding to section 5. 
	\section{SOFTWARE REQUIREMENT SPECIFICATION}
	
	\subsection{Purpose}
	This section details the system requirements specification (SRS) for the Smart Home Power Management System. The system design documentation will be developed from this information.\\
	
	This project aims to provide a flexible software system which is able to remotely control and monitor IoT devices, as well as perform detailed power consumption diagnostics.
	
	\subsection{Project Scope}
	The project is a system that will allow for remote control, monitoring and automation of IoT devices on a Local Area Network (LAN). A client-server architecture will be used since this allows a back-end server to continuously manage devices while allowing for a client to connect on-demand. The front-end will initially be implemented as a web page for simplicity and compatibility with many existing devices (such as cellphones and personal computers). \\
	\newline 
	The back-end provides functionality to control and monitor devices, and to log device power consumption. Additionally, the back-end will contain the web server used for interfacing with users. \\
	\newline
	The front-end will consist of a web-based user interface which will provide secure access to a device dashboard. The dashboard will provide remote control and configuration of devices, as well as access to power consumption data. Addition and removal of IoT devices will also be performed through the dashboard. 
	
	\subsection{Project Overview}
	
	Figure~\ref{fig:dfd} shows a data flow diagram of the system. Data collected from IoT devices is stored in a database and used to control other devices as defined by the user. A web interface allows the user to configure devices and to view the stored data.
	\begin{figure}[!htb]
		\includegraphics[width=\columnwidth]{data-flow-1}
		\caption{Data flow diagram (DFD) of the system. All data flows are bidirectional}
		\label{fig:dfd}
	\end{figure}
	
	\subsubsection{Assumptions:}
	\begin{itemize}
		\item All of the IoT devices will be connected to the same LAN
		\item Only a small number of simultaneous users and devices will be connected at once
	\end{itemize}
	\subsubsection{Constraints:}
	\begin{itemize}
		\item The user interface must be accessible through a web browser
		\item All devices in the system require wireless connectivity
	\end{itemize}
	
	\subsubsection{User Classes and Characteristics:}
	\begin{itemize}
		\item Basic users who can configure basic devices and view power usage statistics
		\item Advanced users who can configure custom devices and export power usage statistics for further processing
	\end{itemize}
	
	\subsubsection{Operating Environment:}
	The following technologies will be used to implement the system:
	\begin{itemize}
		\item Django Web Framework (Python 3.5.1)
		\item PostgreSQL Database Management System (DBMS)
		\item Docker 1.8.2
	\end{itemize}
	Assuming that few users and devices will be connected to the system simultaneously (such as in a typical household), the system requirements are fairly relaxed:
	\begin{itemize}
		\item Any modern Microsoft Windows or GNU/Linux system that supports the technologies used
		\item A connection to the LAN, such as Ethernet or WiFi
		\item Low-cost hardware such as a Raspberry Pi
	\end{itemize}
	However, depending on the system configuration, an external storage solution may be needed for storing a large amount of power usage data.
	
	%3 tier has better security because 2 tier the client is allowed access and communication with 
	
	\subsubsection{Software Development Life-cycle:}
	The system will be developed using an Agile software development methodology. In particular, the popular SCRUM framework will be used so that the system's requirements and design details can change quickly if need be. 
	
	\subsection{System Features}
	The smart home power management system is made up of various features which enhance the usability of the product, along with some additional features which simplify all related functionality.
	\subsubsection{System Feature 1 - Remote On/Off Switching: } 
	Switch any of your selected appliances on or off from any personal device connected to the home network. 
	\newline
	\textbf{Description:}
	The user can control the power status of various appliances in the household. The appliances are connected independently, for which reason, multiple appliances can be controlled through the same interface, simultaneously. 
	\newline
	\textbf{Stimulus/Response Sequences:}
	The user has to select the "Power Remote" tab on the home page to display the on and off options corresponding to each connection. 
	%\subsubsection{Functional Requirements}
	
	\subsubsection{System Feature 2 - User Configurable Triggers:} 
	Personalise various situations which will trigger an action.
	\newline
	\textbf{Trigger 1 - Motion Detection:}
	Set appliances to switch on or off depending on surrounding motion. 
	\newline
	\textit{Description:}
	The user can control whether specific appliances must be configured with motion detection or not. For example, if motion detection is set for a certain set of lights, they will detect movement in the surrounding area and switch on, or switch off when there is no motion detected for a set period of time. If the user does not want an appliance or set of lights to be triggered by motion, the respective switch is "off" on the webpage. 
	\newline
	\textit{Stimulus/Response Sequences:}	
	The user has to select the "Triggers" tab from the home page, and thereafter select the "Motion Detection" tab at the top left of the newly loaded page to display the corresponding settings. Figure \ref{Trigger_Tab} in Section 4 below illustrates this page. 
	\newline
	\textbf{Trigger 2 - Temperature Detection:}
	Set appliance statuses to vary depending on the surrounding temperature.
	\newline
	\textit{Description:}
	The user can control whether specific appliances must be configured with heat triggers or not. For example, if temperature detection is set for a specific appliance, it will detect a certain temperature in the surrounding area and switch on, switch off, or maintain state if it is too hot, too cold, or within the correct temperature range depending on the user choices. If the user does not want an appliance or set of lights to be triggered by the ambient temperature, the respective switch is "off" on the webpage. 
	\newline
	\textit{Stimulus/Response Sequences:}	
	The user has to select the "Triggers" tab from the home page and thereafter select the "Temperature Detection" tab at the top of the newly loaded page, (second from the left), to display the corresponding settings.
	\newline
	\textbf{Trigger 3 - Light Detection:}
	Set appliance statuses to vary depending on the surrounding light.
	\newline
	\textit{Description:}
	The user can control whether specific appliances must be configured with light triggers or not. For example, if light detection is set for a specific appliance, it will detect a certain ambient light level in the surrounding area and correspondingly vary, or maintain state depending on the user choices. If the user does not want an appliance or set of lights to be triggered by the ambient light levels, the respective switch is "off" on the webpage. 
	\newline
	\textit{Stimulus/Response Sequences:}
	The user has to select the "Triggers" tab from the home page and thereafter select the "Light Detection" tab at the top of the newly loaded page, (third from the left), to display the corresponding settings.
	\newline
	\textbf{Trigger 4 - Time Scheduling:}
	Select and adjust times for the different appliances to be on, off, or running on defined settings. 
	\newline
	\textit{Description:}
	The user can activate time scheduling for each device/set of lights independently connected to the smart home power management system. For example, the user can set the geysers to switch on from 6 am to 8 am and from 7 pm to 9 pm everyday. Note that the selection of time scheduling for appliances does not affect the user's ability to manually control the power via the system, or directly in person. 
	\newline
	\textit{Stimulus/Response Sequences:}
	The user has to select the "Triggers" tab from the home page and thereafter select the "Time Scheduling" tab at the top right of the newly loaded page to display the corresponding settings.
	\subsubsection{System Feature 3 - Power Consumption Monitoring:}
	Monitor the power consumption by various appliances and sets of lights in the household. 
	\newline
	\textbf{Description:}
	Given that this system is based on power management, the user can easily view detailed layouts of the total household power consumption data and analytics. The user will be able to view graphical statistics of the power consumption over the course of the day, as well as detailed statistics over a longer period of time (previous month, or year). This allows the user to compare the household power consumption with that of the usage if this system was not implemented. 
	\newline
	\textbf{Stimulus/Response Sequences:}
	The webpage automatically starts on the "Home Status" tab upon loading. The user can view this page for a daily consumption summary, and can then click on the "Consumption Monitoring" tab seen on the left of the same page to view these analytics in greater detail, over a longer period of time.
	\subsubsection{System Feature 4 - Energy Source Management:}
	Control and manage the different energy sources in the household such as varying the usage between electricity and solar power.
	\newline 
	\textbf{Description:}
	This system encourages the use of alternative, renewable energy sources. If the user has catered for these facilities, the system allows additional power volume management through the energy source management configuration. 
	\newline
	\textbf{Stimulus/Response Sequences:}
	The user has to select the "Energy Source Management" tab on the left of the homepage to be directed to this page. 
	\subsubsection{System Feature 6 - User Configurable Alerts:} 
	Choose which events should result in an immediate alert/notification on your system.
	\newline 
	\textbf{Description:}
	Along with all the personalised settings configured on the system, the user is able to define situations in which alerts appear on the system and possibly directly to the user's smart device. 
	\newline
	\textbf{Stimulus/Response Sequences:}
	The user has to select the "Alerts" tab on the left of the homepage to then configure these settings.
	\subsubsection{System Feature 7 - User Configurable Webpage Settings} 
	Define webpage settings in order to enhance the power management system experience.
	\newline
	\textbf{Description:}
	The user can add or remove devices to be controlled by the smart home power management system, alter the webpage appearance, manage users on the network, and edit security settings. 
	\newline
	\textbf{Stimulus/Response Sequences:}
	The user must click on the "Settings" link to the right of the title on the home page to be able to configure all the required settings.
	
	\subsection{External Interface Requirements}
	The external interface is the interface which allows the user to interact with the system through a hardware device using software. The external interfaces consists of a user interface, hardware interface, software interface and communication interface. 
	
	\subsubsection{User Interface - GUI:}
	The user interface is how the user will interact with the system. The requirements for the design of user interface must be simple and easy to navigate. A simple format of representing all the devices connected to the Smart Home Power Management System is to display the features available for all devices on a dashboard. This can been seen in Figure \ref{Home_Dashboard}.
	
	Figure \ref{Trigger_Tab} is a simple illustration of the interface between the user the light detection triggers on the system. The layout of the tab is further divided to clearly illustrate the sub-systems which the user has access to. As seen from the figure, the switches on the triggers tab are designed in a graphical format that is simple for users to use.  
	
	Figure \ref{Settings} is the settings page, in which it designed for the user to navigate through each sub-system. The \textit{Add/Remove Device} feature is an important feature, as it is expected that the client may have to add or remove devices for future use. The settings page is set up similarly to the home page on the trigger tab, as user's  familiarity to the website is of importance.
	%\vspace{-4.5cm}
	\begin{itemize}
		\item Home Page Dashboard
		%\vspace{-10cm}
		\begin{figure}[H]
			\centering
			\includegraphics[width=\linewidth]{Home_Page.png}
			\caption{Figure illustrating the home page the user will see once they have logged on to access the system.}
			\label{Home_Dashboard}
		\end{figure}
		
		\item Trigger Tab on Dashboard
		\begin{figure}[!h]
			\centering
			\includegraphics[width=\linewidth]{Trigger_Tab.png}
			\caption{Figure illustrating the triggers tab, to allow users to control switching of sensors in their home through the system.}
			\label{Trigger_Tab}
		\end{figure}
		\newpage
		\item Settings Page
		\begin{figure}[!h]
			\centering
			\includegraphics[width=\linewidth]{Settings.png}
			\caption{Figure illustrating the settings page.}
			\label{Settings}
		\end{figure}
	\end{itemize}
	
	\subsubsection{Hardware Interface:}
	The user interface is implemented on a web based platform that is accessible through a browser. The hardware required to access the system can be either of the listed devices found in the list below:
	
	\begin{itemize}
		\item Large Desktops (1200 -  pixels)
		\item Medium Desktops (992 - 1199 pixels)
		\item Small Devices (768 - 991 pixels)
		\item Extra Small Devices (max 767 pixels)
	\end{itemize}
	
	\subsubsection{Communication Interface:}
	The Smart Home Power Management System is a web-based application that requires a internet connection for the communication between the hardware devices, system and IoT devices. The main connection between the system and the IoT devices is through the user's home wireless connect (WiFi). For the hardware device to communicate with the system any type of internet connection will do.
	
	\subsection{Other Non-Functional Requirements}
	
	\subsubsection{Performance Requirements:}
	The smart home power system is an application and system that is designed for efficiency. This means that the application as well as the connecting household components need to respond quickly and in real time. 
	\\\\
	The application will most likely undergo several updates and changes for the user's benefit. The system is required to update on user command. Updates will include further improvements to the application as well as fixes for issues that arise in operation.
	
	\subsubsection{Safety Requirements:} 
	The application as well as the system components need to take certain safety concerns into account. 
	\\\\
	Due to the fact that the application is essentially controlling most of a home's appliances and electricity usage, it is important that it monitors everything it is controlling to prevent problems that may arise. The application needs to ensure that any device connected in the system does not reach a dangerous level of usage. In this case, the application should either switch off the device in question or notify the user that something is not functioning correctly and needs to be addressed. 
	
	\subsubsection{Security Requirements:}
	Due to the fact that the system controls a user's home, it therefore requires security considerations to be taken into account.
	\\\\
	The system needs to ensure that only the user has access to the application to prevent external parties gaining control of the connected components within a house. This can be done with a signup, login and authentication process. 
	The components within the house that the application connects with, need to be protected from external parties and therefore they must be explicitly authenticated. 
	
	\subsubsection{Software Quality Attributes:}
	The application is web based and needs to be user friendly. The functioning of the application needs to be simple so that no additional documentation or prior knowledge or experience is required. 
	
	\section{DESIGN DOCUMENT}
	
	The purpose of this section is to provide details regarding the software development of the project. 
	
	\subsection{Scope}
	The scope of the project is for a basic prototype of the proposed power management system. The focus of the system is to manage connected devices and their corresponding power usage data. 
	
	The scope of this prototype, however, is limited to the management and analytics portion of the complete system, not the inter-device communication aspect. 
	
	\begin{center}
		\textbf{I. FRONT-END}
	\end{center}
	
	\subsection{Overview}
	The front-end of the power home management system is an integral component of the system as a whole. Without the presence of the front-end, the back-end becomes essentially irrelevant. The front-end allows the user to interact with the smart home system through a web-page platform. Within the front-end are graphical and functional features that make the connected devices easily controlled. The front-end consists of a login page, an administration page, a settings page, a device details page, both individual and collective, as well as a dashboard page containing system and device diagnostics.
	
	\subsubsection{Purpose}
	The purpose of the front-end is to provide a user friendly graphical user interface which allows the user to interact with the smart home power management system. It provides a means of communication between the front-end and the back-end of the system in order to display the relevant information or changes to the user. In addition it allows the user to control the devices remotely through the platform from any location.
	
	\subsubsection{Scope}
	The implementation of the front-end is for a smart home power management system which monitors device usage and power consumption. It therefore allows the user the ability to alter power usage as well as configure alerts and manage the settings of the front-end. The front-end also allows the user to initiate remote triggering of connected devices such as lights and kitchen appliances. It is also designed to display the outcomes of triggering motion detectors and temperature sensors.
	
	\subsubsection{Definitions, Acronyms and Abbreviations}
	
	\begin{itemize}
		\item \textbf{CSS} - Cascading Style Sheets which is a stylesheet language that sets up the appearance of the HTML \cite{CSS}.
		\item \textbf{HTML} - Hypertext Markup Language which is used to generate web pages and its objects form the basis of all websites \cite{HTML}.
		\item \textbf{Django} - A framework used to compile and render the HTML pages.
		\item \textbf{Bootstrap} - provides a html and css template for web development
		\item \textbf{Javascript} - A high level and dynamic programming language that is used with HTML and the web \cite{Javascript}.
	\end{itemize}
	\newpage
	\subsection{Use Cases}
	The use cases for the front-end are as given in the tables below. 
	
	\begin{table}[H]
		\centering
		\caption{Table illustrating the details of the use case for trigger switches}
		\label{trigger_switching_use_case}
		\begin{tabular}{| p{22mm} | p{50mm} |}
			\hline
			\textbf{Use Case} & \textbf{Trigger Switches}\\
			\hline
			Description & The goal of the trigger switching is to allow the users to manually control the connected devices' state through a web-page platform.\\
			\hline
			Actors & Users within a household \\
			\hline
			System Under Design & Web-page Platform for trigger switching\\
			\hline
			Preconditions & The user has successfully passed the authentication process via the login system.\\
			\hline
			Assumptions & It is assumed that the user has a basic understanding of how to access a web-page platform using technological devices.\\
			\hline
			Non-Functional Requirements & The switches are required to be instantaneously responsive when triggered. In addition the triggers must be able to tolerate system malfunctions. .\\
			\hline
			Frequency & The usage frequency of the trigger switches are on a hourly to daily bases \\
			\hline
			Priority & It is of priority, as it is the most accessed functionality in the Smart Home Power Management system. It is also of importance since the functionality allows the user to override the time scheduling settings.\\
			\hline
		\end{tabular}
	\end{table}
	\newpage
	\begin{table}[H]
		\centering
		\caption{Table illustrating the details of the use case for the addition and removal of household devices}
		\label{addition_removal_use_case}
		\begin{tabular}{| p{22mm} | p{50mm} |}
			\hline
			\textbf{Use Case} & \textbf{Addition and Removal of Devices}\\
			\hline
			Description & The purpose of the feature is to enable the user to add and remove devices on the system. \\
			\hline
			Actors & Administration user \\
			\hline
			System Under Design & Addition and Removal web-page platform \\
			\hline
			Preconditions & The user has passed the authentication procedure and they have administration rights. \\
			\hline
			Typical Flow of Events & 1. User logins into the system\\
			& 2. Accesses the administration web-page \\
			& 3. Selects the \textit{Add Device} option \\
			& 4. Provides device details in the allocated input boxes \\
			& 5. Once satisfied with the details of the devices, then select the \textit{save} button to save. \\
			\hline
			Assumptions & There is at least one allocated administration user in the household.\\
			\hline
			Non-Functional Requirements & The addition and removal of the devices in the system is expected to be instant, to prevent any confusion to any of the users.\\
			\hline
			Frequency & The frequency of usage of the addition and removal feature is low, since the devices will be added during the installation of the system. If there are any device removals, this will only occur on occasion when the device/s are defective.\\
			\hline
			Priority & This is a high priority feature in the system, as this system is reliant on the ability of the administration user to add and remove devices. Without this feature, the system becomes redundant.\\
			\hline
		\end{tabular}
	\end{table}
	%\pagebreak
	\begin{table}[H]
		\centering
		\caption{Table illustrating the details of the use case for the authentication procedure}
		\label{authentication_use_case}
		\begin{tabular}{| p{22mm} | p{50mm} |}
			\hline
			\textbf{Use Case} & \textbf{Authentication Procedure} \\
			\hline
			Description & The aim of the authentication procedure is to ensure security on the system which results in preventing unwanted user access. \\
			\hline
			Actors & User that wishes to access the system \\
			\hline
			System Under Design & Authentication procedure\\
			\hline
			Preconditions & The user must have previously created an account on the system. \\
			\hline
			Typical Flow of Events & 1. User accesses login page. \\
			& 2. User provides valid username in the allocated input box.\\
			& 3. User provides valid password in the allocated password input box. \\
			& 4. Select \textit{Login} button to submit details for validation.\\
			\hline
			Assumptions & It is assumed that the user has an already existing account. In addition it is assumed that once the user has logged into their account, they remain logged in.\\
			\hline
			Non-Functional Requirements & The procedure is required to hide the password provided by the user and allow immediate access to the user once the provided information is verified.\\
			\hline
			Frequency & Moderate usage due to the assumption that once the user has logged in, the user remains logged unless they are accessing the system from a new mobile or desktop device.\\
			\hline
			Priority & The authentication procedure has high priority, due to the fact that the user is required to log in to access the system. This is important in terms of security, which prevents unwanted users from accessing it.\\
			\hline
		\end{tabular}
	\end{table}
	%\pagebreak
	\begin{table}[H]
		\centering
		\caption{Table illustrating the use case of settings procedure}
		\label{settings_use_case}
		\begin{tabular}{| p{22mm} | p{50mm} |}
			\hline
			\textbf{Use Case} & \textbf{Settings Procedure} \\
			\hline 
			Description & The focus of the settings page is to enable the user to alter both the settings of the connected devices as well as the appearance of the web-page to the user's needs.\\
			\hline
			Actors & Household users \\
			\hline
			System Under Design & Settings Procedure \\
			\hline
			Preconditions & The user is required to have passed the authentication procedure by the logging into the system.\\
			\hline
			Typical Flow of Events & 1. Accessing the settings page \\
			& 2. Selecting either the settings for the connected devices or the appearance of the web-page. \\
			& 3. The settings for the connected devices is performed by selecting the desired device that the user wishes to alter. \\
			& 4. The appearance settings is opened by selecting the \textit{Appearance} tab, in which this takes the user to the web-page that enables them to alter the settings to their customized needs.\\
			& 5. For both the settings the user is required to select the \textit{save} button to ensure that the alterations made are saved.\\
			\hline
			Assumptions & There are default settings implemented for each device during the system installation.\\
			\hline
			Non-Functional Requirements & The settings page is required to be easily accessible and understood by the user to ensure that it is user friendly.\\
			\hline
			Frequency & Moderate usage, since the settings will be performed during installation. It will only be accessed by the user should the user wish to adjust the settings due to changes done in the system. \\
			\hline
			Priorities & High priority, since this establishes the operations of each device. This includes timing, automating devices and power monitoring.\\
			\hline
		\end{tabular}
	\end{table}
	%\pagebreak
	\begin{table}[H]
		\centering
		\caption{Table illustrating the use case of the device details page}
		\label{device_details_use_case}
		\begin{tabular}{| p{22mm} | p{50mm} |}
			\hline
			\textbf{Use Case} & \textbf{Device Details Page}\\
			\hline
			Description & The goal of the device details page is to inform the user of the details of each individual connected devices. In addition it displays the power consumption of each connected devices, as well as the total power consumption in a graphical format.\\
			\hline
			System Under Design & Device Details Page \\
			\hline
			Preconditions & The devices are required to be connected to the system and the user must have passed the authentication procedure to have access the device details. \\
			\hline
			Assumptions & It is assumed that the devices are connected to the system, and that the user has an account. \\
			\hline
			Non-Functional Requirements & It is required to instantly display the device details in a method that is easily understood by the user.\\
			\hline
			Frequency & High usage, since the main reason for the Smart Home system is to manage the power consumption and save, the details device page is predicted to be accessed often to enable the user to analyse the power consumption in their home.\\
			\hline
			Priority & High priority, because this is a crucial component of the system, which entails the details of the each device and its power consumption.\\
			\hline
		\end{tabular}
	\end{table}
	%\pagebreak
	\newpage
	\subsection{Design Overview}
	The Design Overview illustrates the architecture of the front-end implementation of the system. It further places it into the context of external systems, which enables the reader of this document to understand the overall details of the front-end design.
	
	\subsubsection{Overall Architecture}
	The overall architecture of the front-end is shown in Figure~\ref{system_architecture}.
	\begin{figure}[H]
		\centering
		\label{system_architecture}
		\includegraphics[width=0.9\linewidth]{System_Architecture}
		\caption{Figure showing the front-end system architecture}
	\end{figure}
	
	\subsubsection{System Interfaces}
	An interface is a shared boundary across which two separate components exchange information
	\newline
	\textbf{External User Interface Requirements: }
	\begin{enumerate}
		\item \textit{User interfaces}: The user interface enables the user to interact with they system using a graphical user interface (GUI). This can occur without any knowledge of the back-end functionality. The GUI is in the form of a web page which provides a platform for the user to communicate with multiple connected devices. The interface requires a digital device such as a mobile or desktop device which consists of a screen and keyboard. The GUI is designed in such a way as to create an easily navigable display to ensure it is user friendly.
		\item \textit{Software Interfaces}: The front-end is required to interact with the management system in order to obtain data from the database. This is done by using the supplied Django library namely, \textit{django.shortcuts}, in which the functions \texttt{render()} and \texttt{get\_object\_or\_404()} are used to link the back-end with the front-end HTML. 
		\item \textit{Communication Interfaces}: The communication between the management system back-end and the front-end is performed using JavaScript. The connection enables the user to interact with the database by updating it with specific actions.
	\end{enumerate}
	
	\subsubsection{Constraints:}
	The main constraint that is experienced in terms of front-end design is time which is a significant limiting factor. The user must be able to access the interface through a web browser which requires internet connectivity.
	\subsubsection{Assumptions:}
	It is assumed that the interface is designed for users that have previous knowledge and experience in navigating through a webpage platform. The user us expected to know how to create an account as well as log into the account for future use. Individual assumptions regarding each use case have been discussed previously. \\
	\subsubsection{Dependencies:}
	The front-end of the system is dependant on a single database management system in the back-end. Without the information that can be pulled from the database, the front-end becomes essentially useless.
	
	\subsection{Front-End Relevant Modules}
	The following describes the relevant modules for the front-end implementation. The modules consists of switch-buttons, a list of all device details, individual device details, and administration. The following modules are implemented using CSS, HTML, JavaScript and the Django framework. 
	
	\subsubsection{HTML Module:}
	The HTML module constructs the basic layout of how the information is displayed to the user in the front end. Although the HTML module is crucial in layout of the web-page, it is assisted by the CSS module. The HTML presents the information obtained from the database in a specific manner that can be easily understood by the user.
	
	\subsubsection{CSS Module:}
	The CSS Module is an extension of the HTML module, in which it assists the HTML layout by arranging the information in an orderly manner that is appealing and can be easily navigable by the user. The CSS does not convey any information to the user, but it does highlight the importance of specific information that is presented by the HTML module.
	
	\subsubsection{JavaScript Module:}
	JavaScript is a high level and dynamic programming language. The JavaScript module is also an extension of the HTML module, in which it enables the user to update the database dynamically when the user performs specific actions in the front-end.
	
	\subsubsection{Web-Page Layout:}
	The web-page layout is implemented using the Twitter Bootstrap Creative Theme, in which the HTML and CSS modules are the base modules that dictate the presentation of the web-page. The theme is to ensure that the web-page is user friendly as well as appealing. The layout is simple, in which the home-page illustrates all the devices that are connected to the Smart Home Power System along with the toggle switches for each connected device.
	
	\subsubsection{Device Switch-Button:}
	The purpose of implementing the switch-button is to allow users to control the linked devices through the platform. The switch-button has two states namely, \textit{on} or \textit{off}. It can only be one or the other and cannot be both. The implementation of the button will only show one state at a time, to eliminate any confusion to the user. In doing so, this allows the implementation to be user friendly. The on and off switch-button can be seen in Figures \ref{on_switch_button} and  \ref{off_switch_button}, respectively.
	
	\begin{figure}[!h]
		\centering
		\includegraphics[scale=0.35]{switch_button.png}
		\caption{Figure illustrating the switch-button for 'on' state}
		\label{on_switch_button}
	\end{figure}
	
	\begin{figure}[!h]
		\centering
		\includegraphics[scale=0.35]{switch_button_off.png}
		\caption{Figure illustrating the switch-button for 'off' state}
		\label{off_switch_button}
	\end{figure}
	
	\subsubsection{Device Details and Diagnostics:}
	The details and the diagnostics of each connected device are illustrated on the details page, in which it informs the user of the power consumption of each device, as well as giving an overview of the operational times of the device. The purpose of the details and the diagnostics is to inform the user about the accumulated data measured in the system. This is achieved using a graphical format which contains easily understood information. 
	
	\subsubsection{Settings:}
	The settings page is implemented in such a way that it allows the user to easily navigate to the desired device. The settings page contains various settings that allows the user to adjust and modify the chosen device to their desired operational adjustments. These settings consist of adjusting the automated devices with a time schedule, modifying the intensity of specific devices, and allowing the user to trigger the devices. 
	
	\subsubsection{Administration:}
	The simplicity of the administration page is crucial as it is required to be easily understood by the user. The page allows the user to add and remove devices from the smart home power management system. To ensure that the page is easily understood, the conventional \textit{add} and \textit{remove} graphical figures are used. The instructions are clearly stated to prevent any confusion to the user. Aside from allowing the user to add and remove devices, the administration page has the functionality of adding and removing users to the system. The users known to the system are granted access to remotely use it to control the connected devices.
	
	\subsubsection{Login:}
	The login page is designed to be simplistic, in which it only contains two input boxes for a username and password. The \textit{Login} button is centred and explicit, in which it allows the user to easily fill in their details and login into the system. The login page is straight forward and conforms to the general format of other web-pages that require authentication.
	
	\subsection{Non-functional Requirements}
	\subsubsection{Performance}
	The front-end web page needs to be able to respond quickly and in real time. It is also likely that it will need to undergo several updates triggered by user command.
	\subsubsection{Safety}
	In terms of safety, the front-end needs to be able to notify the user in the event that a connected device malfunctions. This allows the user to take action depending on the notification.
	\subsubsection{Security}
	The front-end reinforces security of the system by having login and authentication procedures to prevent unwanted external interference from non-household members.
	\subsubsection{Software Quality Attributes}
	The front-end needs to be user friendly in a way that the user does not require any supporting documentation or prior knowledge of the system to navigate through the web page.
	\subsubsection{Design Constraints}
	The front-end should be built while taking full advantage of open source libraries and supporting software to avoid the need for licensing and additional costs.

	\newpage
	\begin{center}
		\textbf{II. BACK-END}
	\end{center}
	
	\subsection{Design Overview}
	This will give a brief introduction to the smart home power management system back-end design. 
	
	\subsection{Definitions}
	\begin{enumerate}
		\item \textbf{Django} - A high-level Python web framework designed to be scalable and easy to use
		\item \textbf{MQTT} - A lightweight publish/subscribe messaging protocol commonly used in embedded devices \cite{mqtt}
		\item \textbf{RabbitMQ} - A robust message broker framework that supports MQTT \cite{rabbitmq}
		\item \textbf{Celery} - A distributed task queue for Django that uses RabbitMQ as its default message broker \cite{celery}
	\end{enumerate}
	
	\subsubsection{System Architecture:}
	The system architecture will give an overall view of the entire back-end system designed. 
	
	\begin{figure}[H]
		\centering
		\includegraphics[width=\linewidth]{Sys_Overview}
		\caption{System architecture diagram}
		\label{fig:Sys_Overview}
	\end{figure}
	
	
	\subsubsection{Constraints:}
	The main constraint that is also experienced in terms of back-end design is time, which is a significant limiting factor. Additionally, the network bandwidth may be constrained due to large amounts of data generated by many devices. 
	A device which meets the system requirements set out in the Software Requirements Specifications. 
	\subsubsection{Assumptions:}
	It is assumed that all the connected devices will be on the same network and that they will implement the MQTT protocol. It is also assumed that a database will have to be significantly large due to all the data that these devices are generating. 
	\subsubsection{Dependencies:}
	The back-end of the system is dependant on the RAM, harddrive, as well as CPU of the smart home server as well as on the supply of electricity to the household. 

	
	\subsection{Back-End Relevant Modules}
	\begin{itemize}
		\item \textbf{Django Application:} This section is the main application responsible for serving the front end and controlling the database interactions. It uses the Django framework in order to implement this functionality. Django uses Python classes to define models in an Object-Relational Mapping, corresponding to tables in a database. These models will be described in detail in the following section. By defining these models in Python code, Django automatically provides an administration interface and abstracts away low-level database operations.
		\item \textbf{Database Models:} 
		For more details regarding the database models and relationships, see Figure~\ref{fig:databaseModels}.
		\begin{itemize}
			\item \textit{Device Model:} This model represents a singe device. It keeps track of relevant device information, including name, IP address, location, and state. It is the core model of the database system. Two devices cannot have the same name and location attributes. Additionally, no two devices can have the same IP address
			\item \textit{Device Location:} This model represents the location in the household where a device can be found. A location can store many devices, but a device can only be in one location
			\item \textit{Device State:} This model represents the various power states that a device can be in. It is initially populated with the values "on" and "off," however the user still has the ability to add more depending on device capability
			\item \textit{Triggers:} This model represents the various triggers that the system can incorporate, namely, motion, temperature, and light
			It stores an input device ID, an output device ID, and a string of Python code which will provide the conditions for the trigger to fire as well as the action to apply.
			\item \textit{Actions:}  This model represents the various actions that can be taken by the system when a trigger is fired. Any number of Triggers can invoke the same Action
			\item \textit{Power Usage:} This model represents the power usage of the household devices at points in time. It stores power usage data for certain time intervals for each device, allowing time-series analysis of device power usage
		\end{itemize}
		\item \textbf{Celery:} 
		This is an asynchronous task queuing framework that supports scheduling and real-time operation. The Django application uses Celery in order to manage long running tasks such as trigger monitoring as well as controlling and monitoring devices. Using the default RabbitMQ message broker, and the MQTT messaging protocol, Celery communicates with Internet of Things devices over the network. 
		\begin{itemize}
			\item \textit{Celery Worker 1:} This worker will handle tasks requested by the user, such as changing the device state, or polling a device for power usage data. These tasks are typically executed and completed quickly.
			\item \textit{Celery Worker 2:} This worker will periodically execute the trigger processing task by fetching all the triggers from the database and executing those actions which correspond to the trigger that was flagged. This task may run for an extended period of time, hence the need for the second worker.
		\end{itemize}
	\end{itemize}
	
	\begin{figure}[H]
		\centering
		\includegraphics[width=\linewidth]{ER}
		\caption{The entity relationship diagram showing the relationships between database models as well as the primary and foreign keys for each model}
		\label{fig:databaseModels}
	\end{figure}
		
	\subsection{Non-Functional Requirements}
	\subsubsection{Performance Requirements:}
	The smart home power system is an application and system that is designed for efficiency. This means that the application as well as the connecting household components need to respond quickly and in real time. 
	\\\\
	The application will most likely undergo several updates and changes for the user's benefit. The system is required to update on user command. Updates will include further improvements to the application as well as fixes for issues that arise in operation.
	\\\\
	The lightweight MQTT protocol is chosen to minimise network traffic and processing requirements so that more devices can be added without performance degradation. 
	
	\subsubsection{Safety Requirements:} 
	The application as well as the system components need to take certain safety concerns into account. 
	\\\\
	Due to the fact that the application is essentially controlling most of a home's appliances and electricity usage, it is important that it monitors everything it is controlling to prevent problems that may arise. The application needs to ensure that any device connected in the system does not reach a dangerous level of usage. In this case, the application should either switch off the device in question or notify the user that something is not functioning correctly and needs to be addressed. 
	
	\subsubsection{Security Requirements:}
	Due to the fact that the system controls a user's home, it therefore requires security considerations to be taken into account.
	\\\\
	The system needs to ensure that only authorised users have access to the application to prevent external parties gaining control of the connected components within the house. This can be done with a signup, login and authentication process. 
	The components within the house that the application connects with, need to be protected from external parties and therefore they must be explicitly authenticated. 
	
	
	\subsection{Supplementary Documentation}
	\subsubsection{Tools used to create diagrams:}
	\begin{itemize}
		\item System overview diagrams: Microsoft PowerPoint
		\item UML diagram: ArgoUML\\http://argouml.tigris.org
		\item Burndown chart: Burndown for TRELLO\\https://www.burndownfortrello.com
	\end{itemize}
	
	\section{PROTOTYPE IMPLEMENTATION}
	
	This section documents the implementation of the first prototype of the Smart Home Power Management System. 	
	
	\subsection{Key Modules Selected for Project Illustration:}
	A few class modules have been written using Django, a high-level Python Web framework, in conjunction with a Bootstrap Theme, a powerful front-end framework, for the first prototype: 
	\begin{enumerate}
		\item Scrollable web-pages, with a page header and overall device information
		\item The addition and removal of device/s, along with corresponding specifications
		\item The adding and removing of user account/s in the system
		%\item Setting parameters which do not allow certain device characteristics when adding a device
		\item Viewing the connected devices along with its details
		\item Toggling between the individual device's state
		\item Enable the user to log in into their user account
	\end{enumerate}
	
	\subsection{Testing:}
	Simple tests have been written and conducted along the development process of this prototype: 
	
	\subsubsection{Front-end:}
	There are 2 sets of testing in the front-end: 
	\begin{enumerate}
		\item Manual user testing
		\item Automatic, predefined written/coded tests
	\end{enumerate}
	
	\textbf{Manual User Testing:}
	Every possible page and button combination have been manually tested. 
	
	\textbf{Written tests:}
	\begin{enumerate}
		\item Testing that the homepage successfully loads when it is called
		\item Check that the details page of a specific device loads when it is called
		\item Test that the device list page loads successfully
		\item Check that the login page loads successfully
	\end{enumerate}	
	
	\subsubsection{Back-end:}
	The tests that have been written to demonstrate the functionality of the back-end are: 
	\begin{enumerate}
		\item Check that a device can be added to the database
		\item Test that the system does not allow datatypes which do not fit the device specifications. For example, a user cannot enter a device IP address as "3498347", but instead it must be an IPv4 or IPv6 address
		\item Check that a certain home location cannot contain two devices with the same names. For example, a kitchen cannot contain "kettle 1" and "kettle 1" 
		\item Test that no two devices can have the same IP address
	\end{enumerate}
	
	\section{SPRINT PLANNING}
	
	%\subsection{Work Schedule}
	All work for the prototype development was conducted as a well collaborated team. Upon receiving information complying to the deliverables of this lab, a three-hour sprint planning meeting was called in order to conclude the following: 
	\begin{enumerate}
		\item The product backlog
		\item The sprint goals
		\item The action plan of how to achieve this goal by the target date (4 April 2016)
	\end{enumerate}
	
	As is required, the product backlog was first created in order to decide which of these tasks will be transferred to the sprint backlog for the latest product increment. The product backlog drawn up on 24 March 2016 is as shown below (ordered by priority):
	
	\begin{itemize}
		\item As a user I would like to be able to add/remove a device
		\begin{itemize}
			\item Create form to add new device
			\item Create list of devices which can be disabled/removed
		\end{itemize}
		\item As a user, I would like to be able to manually switch on and off appliances remotely
		\begin{itemize}
			\item Create page header menu
			\item Create sidebar and container
			\item Create page tabs
		\end{itemize}
		\item As a user I would like to view which devices are using power, and how much they are using
		\begin{itemize}
			\item Create dummy data on backend
			\item Create basic power usage graph for each device
		\end{itemize}
		\item As a user I would like to personalise various situations which will trigger an action
		\begin{itemize}
			\item Create list of different triggers 
			\item Create trigger settings page 
			\item Create form to choose triggers
		\end{itemize}
		\item As a user I need to choose which events should result in an immediate alert or notification on my system
		\begin{itemize}
			\item Logic to monitor status of different subsystems
			\item Configure how alert will be sent to user and connect accordingly
		\end{itemize}
		\item As a user it is convenient for me to be able to define webpage settings in order to enhance the power management system experience
		\item As a developer I want to be able to easily run the server using Docker
		\begin{itemize}
			\item Set up docker
			\item Configure docker to run server and database
		\end{itemize}
	\end{itemize}
	\vspace{-2mm}
	Upon this discussion, with two weeks remaining till project submission, a sprint planning meeting was held in order to discuss and plan the work to be performed in the first sprint which would have a timebox of one week. A sprint backlog was drawn up on Trello (a software collaboration tool). The sprint backlog is a basic list of the tasks that must be implemented by the team in order to deliver a functional product increment at the end of that sprint \cite{sprintbacklogdef}. 
	\newline
	\newline
	The screenshot below illustrates the items from the product backlog that were moved to the sprint backlog on this day. 
	%\vspace{-15mm}
	\begin{figure}[H]
		\centering
		\includegraphics[width=\linewidth]{sprint_backlog_1}
		\caption{Screenshot of the Trello page drawn on the first day of the first sprint for the initial prototype implementation}
		\label{fig:sprint_backlog_1}
	\end{figure}
	
	After the first week, a second sprint planning was held for the following week-long sprint. The screenshot below illustrates the new items that were now moved to the next sprint backlog. 
	
	\begin{figure}[H]
		\centering
		\includegraphics[width=\linewidth]{sprint_backlog_2}
		\caption{Screenshot of the Trello page drawn on the first day of the second sprint of the for the initial prototype implementation}
		\label{fig:sprint_backlog_2}
	\end{figure}
	
	Tasks were delegated and the product was worked on and shared amongst the team using GIT, while sprint retrospective meetings were held once every week on Thursdays.
	\newline
	\newline	
	As was decided at the commencement of this project, Alice Yang and Daniel Weinberg have been assigned to the front-end development, whereas Ari Croock and Kanaka Babshet have been assigned to the back-end development. 
	
	
	
	%\section{DESCRIPTION OF RELEVANT MODULES}
	%Refer to the "Object Descriptions" (Section 3.4) within the Design Document for a presentation of the relevant modules implemented in the smart home power management system. 
	\section{SPRINT RETROSPECTIVE}
	
	The burndown charts for Sprint 1 and 2 are shown in Figure~\ref{fig:Burndown1} and Figure~\ref{fig:Burndown2} . As can be seen, the actual time spent on the planned tasks exceeded the estimated time overall. This can be attributed to a number of reasons, namely time constraints and inexperience with the chosen software frameworks. Over time the scrum master and software engineers will become better at estimating time required for tasks, and will gain experience with relevant frameworks, making routine tasks quicker and easier to perform.
	
	The team should continue having productive and efficient sprint planning and sprint retrospective meetings at the beginning and end of each sprint. 
	
	Due to time constraints and other projects being worked on simultaneously, daily scrum meetings could not be held (meetings were held roughly every two days). Preferably these meetings should take place daily in order to encourage communication and help reduce the time spent on solving technical issues. 
	The scrum master should also encourage continuous feedback during the sprint as ideas may be forgotten by the time the retrospective meeting occurs.
	
	\begin{figure} [H]
		\centering
		\includegraphics[width=\linewidth]{Burndown1}
		\caption{Burndown chart for Sprint 1: 24 March 2016 - 31 March 2016}
		\label{fig:Burndown1}
	\end{figure}
	
	\begin{figure} [H]
		\centering
		\includegraphics[width=\linewidth]{Burndown2}
		\caption{Burndown chart for Sprint 2: 31 March 2016 - 4 April 2016}
		\label{fig:Burndown2}
	\end{figure}


	%\newpage
	%\bibliographystyle{witseie}
	%\begin{thebibliography}{9}		
	%\end{thebibliography}
	
	\newpage
	\pagebreak
	\bibliographystyle{IEEEtran}
	\bibliography{sample}
	
	%{\tiny \vfill \hfill \today \hspace{5mm} witseie-paper-2003.\TeX}
	
	\newpage
	\onecolumn
	\section*{Appendix A}
	A survey was conducted prior to implementation and design of the smart home power management system. The figures below illustrates the results corresponding to every question.
	
	\begin{figure}[H]
\centering
\includegraphics[width=0.7\linewidth]{survey1}
\caption{Pie chart illustrating the results for Question 1 of the smart home power management survey}
\label{fig:survey1}
\end{figure}
\begin{figure}[H]
\centering
\includegraphics[width=0.7\linewidth]{survey2}
\caption{Pie chart illustrating the results for Question 2 of the smart home power management survey}
\label{fig:survey2}
\end{figure}
\begin{figure}[H]
	\centering
	\includegraphics[width=0.7\linewidth]{survey3}
	\caption{Pie chart illustrating the results for Question 3 of the smart home power management survey}
	\label{fig:survey3}
\end{figure}
\begin{figure}[H]
	\centering
	\includegraphics[width=0.7\linewidth]{survey4}
	\caption{Pie chart illustrating the results for Question 4 of the smart home power management survey}
	\label{fig:survey4}
\end{figure}
\begin{figure}[H]
	\centering
	\includegraphics[width=0.7\linewidth]{survey5}
	\caption{Bar graph illustrating the results for Question 5 of the smart home power management survey}
	\label{fig:survey5}
\end{figure}
	
\begin{figure}[H]
	\centering
	\includegraphics[width=0.7\linewidth]{survey6}
	\caption{Bar graph illustrating the results for Question 6 of the smart home power management survey}
	\label{fig:survey6}
\end{figure}	


\end{document}

" vim: ts=4
" vim: tw=78
" vim: autoindent
" vim: shiftwidth=4
